# 古いCiscoるうたあをコンソールサーバとして使うっ
ネットワーク機器のCONSOLEポートを別の部屋から叩きたい時、Linuxの/dev/consoleに ssh/telnet を使わず遠隔ログインしたい時（ランレベル1に落とす必要があるときとか）ってありますよね～ あるある👩🏻‍🍳（ぉ

ではその、シリアルポート、CONSOLEポートをtelnet越しに見られるようにするコンソールサーバを、古いCiscoるうたあのAUXポートを使って作るっ

## 👩🏻‍🍳素材🍞
* AUXポート付きの古いCiscoるうたあ（Cisco 1700シリーズが、静かで、安くて、入手性良くてオススメ☆）　3600, 2800, 2900シリーズでも可
* ロールオーバーケーブル or DB-9コンソールケーブル

ロールオーバーケーブルは、あきばパレットタウンさんに転がっている場合もある・・・（DB-9コネクタが切り離せるコンソールケーブルの形で）

## 👩🏻‍🍳作り方🍳
### 設定値
Ciscoるうたあに以下コマンド投入後、ルータの2005番ポート(Cisco 1721の場合)にアクセスすれば、AUXポートの先に繋がった別マシンのコンソールポートが見える！

```
line aux 0
 modem InOut
 no exec
 transport preferred telnet
 transport input telnet
 transport output telnet
 speed 115200　　←　ボーレートはこのコマンドで変更可能っ☆
```

### 接続
AUXポートと別マシンのコンソールポートは市販のCiscoコンソールケーブル(DB9-RJ45)で繋げばよろし♪　相手もRJ-45ポートな場合は(RJ45-RJ45)なロールオーバーケーブルを使おお！！

ロールオーバーケーブルは、ケーブルが切り離せるタイプのコンソールケーブルのケーブル部分でおけ（語彙力）

Linux マシンのコンソールを触りたいときはシリアルコンソールを使えるように GRUB などを設定すれば /dev/ttyS0 越しにログインできますっ（Linuxは画面出力量が多いので、ボーレートは115200bpsがオススメ）

### telnet ポート番号
ポート番号はAUXのline番号 + 2000になります。
（以下の例だと5 + 2000 = 2005番）AUXポート付いてるルータなら可能！

```
Cisco1721#show line
   Tty Typ     Tx/Rx    A Modem  Roty AccO AccI   Uses   Noise  Overruns   Int
     0 CTY              -    -      -    -    -      0       0     0/0       -
     5 AUX 115200/115200- inout     -    -    -      0       0     0/0       -
     6 VTY              -    -      -    -    -      0       0     0/0       -
     7 VTY              -    -      -    -    -      0       0     0/0       -
     8 VTY              -    -      -    -    -      0       0     0/0       -
     9 VTY              -    -      -    -    -      0       0     0/0       -
    10 VTY              -    -      -    -    -      0       0     0/0       -
*   11 VTY              -    -      -    -    -      2       0     0/0       -
    12 VTY              -    -      -    -    -      0       0     0/0       -
    13 VTY              -    -      -    -    -      0       0     0/0       -
    14 VTY              -    -      -    -    -      0       0     0/0       -
    15 VTY              -    -      -    -    -      0       0     0/0       -
    16 VTY              -    -      -    -    -      0       0     0/0       -
    17 VTY              -    -      -    -    -      0       0     0/0       -
    18 VTY              -    -      -    -    -      0       0     0/0       -
    19 VTY              -    -      -    -    -      0       0     0/0       -
    20 VTY              -    -      -    -    -      0       0     0/0       -
    21 VTY              -    -      -    -    -      0       0     0/0       -

Line(s) not in async mode -or- with no hardware support:
1-4
```
## ロールオーバーケーブルの作り方
ストレートケーブルやクロスケーブルでは代用できないので、ちうい！ロールオーバーケーブル持ってない？作ろうっ！

### 素材
* てきとーなLANケーブル　1本
* LANケーブルカシメ工具　1個
* LANコネクター　数個

### 配線

芯線を以下の順に並べて、LANケーブルをカシメれば作れるっ☆
```

白橙１　－　８茶
　橙２　－　７白茶
白緑３　－　６緑
　青４　－　５白青
白青５　－　４青
　緑６　－　３白緑
白茶７　－　２橙
　茶８　－　１白橙
```

## 構築例
SunFire V120 の LOMポート（コンソールポート）を Cisco 1721越しにtelnetで見れるようにしてみた例

[構築例ツイート](https://x.com/IchikawaYukko/status/1616826591153356808) 

## Cisco Community の技術情報
本ドキュメントの元ネタとなった技術情報

[Cisco Community - ISR/ASR の AUX ポート](https://community.cisco.com/t5/tkb-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9-%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88/isr-asr-%E3%81%AE-aux-%E3%83%9D%E3%83%BC%E3%83%88/ta-p/3161732)

## 編集後記（ぉ
* この構想はそもそも「AUXポートって何に使うんだ？？？ 用途ある！？」と思って調べていたら、偶然発見したものですｗ なおAUXポート同士をロールオーバーケーブルで繋いで SLIP (Seril Line IP)接続して、IPインターフェースとしても使えるもよお？ もしかしたら、モデムも繋げるのかもしれない（ってかそもそもの用途はたぶんモデム接続）
